{% extends "base.html" %}
{% block title %}Menú Principal{% endblock %}

{% block content %}
<div class="container mx-auto px-4 mt-4">
    <div class="bg-white rounded-lg shadow-md text-center p-6">
        <h1 class="text-3xl font-bold text-gray-800">Suministros Informáticos CNCV</h1>
        <h2 class="text-2xl font-semibold text-gray-700 mt-2">Menú Principal</h2>
        <p class="text-gray-600 mt-2">Bienvenido al panel de administración. Desde aquí puedes gestionar todos los aspectos de la aplicación.</p>
    </div>

    <div class="flex flex-wrap -mx-4 mt-8">
        <!-- Columna de Gestión -->
        <div class="w-full md:w-1/3 px-4 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6 h-full">
                <h5 class="text-xl font-bold mb-4">Gestión</h5>
                <div class="space-y-2">
                    <a href="{{ url_for('proveedores.proveedores') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Proveedores</a>
                    <a href="{{ url_for('inventario.productos') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Inventario</a>
                    <a href="{{ url_for('inventario.pedidos') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Pedidos</a>
                </div>
            </div>
        </div>
        <!-- Columna de Contabilidad y Reportes -->
        <div class="w-full md:w-1/3 px-4 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6 h-full">
                <h5 class="text-xl font-bold mb-4">Contabilidad y Reportes</h5>
                <div class="space-y-2">
                    <a href="{{ url_for('contabilidad.balance') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Balance</a>
                    <a href="{{ url_for('contabilidad.cuenta_resultados') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Cuenta de Resultados</a>
                    <a href="{{ url_for('contabilidad.diario') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Diario</a>
                    <a href="{{ url_for('reportes.graficas') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Gráficos</a>
                </div>
            </div>
        </div>
        <!-- Columna de Exportar Datos -->
        <div class="w-full md:w-1/3 px-4 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6 h-full">
                <h5 class="text-xl font-bold mb-4">Exportar Datos</h5>
                <div class="space-y-2">
                    <a href="{{ url_for('inventario.exportar_productos') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Exportar Inventario</a>
                    <a href="{{ url_for('proveedores.exportar_proveedores') }}" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded">Exportar Proveedores</a>
                </div>
            </div>
        </div>
    </div>

    {% if alertas_stock_bajo and alertas_stock_bajo > 0 %}
    <div class="mt-4">
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md flex justify-between items-center" role="alert">
            <p>Hay {{ alertas_stock_bajo }} productos con stock bajo que requieren atención.</p>
            <a class="border border-yellow-500 text-yellow-600 hover:bg-yellow-500 hover:text-white font-bold py-1 px-3 rounded text-sm" href="{{ url_for('inventario.productos', stock='bajo') }}">Ver productos</a>
        </div>
    </div>
    {% endif %}

    <div class="flex flex-wrap -mx-2 mt-8">
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Stock bajo</h6>
                <p class="text-3xl font-bold">{{ alertas_stock_bajo if alertas_stock_bajo is not none else '-' }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Inventario total</h6>
                <p class="text-3xl font-bold">{{ total_inventario if total_inventario is not none else '-' }} <span class="text-xl">ítems</span></p>
                <p class="text-xs text-gray-500">Valor: {{ valor_inventario | currency }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Pedidos pendientes</h6>
                <p class="text-3xl font-bold">{{ pedidos_pendientes if pedidos_pendientes is not none else '-' }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Ventas totales</h6>
                <p class="text-3xl font-bold">{{ ventas_totales | currency }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Proveedores</h6>
                <p class="text-3xl font-bold">{{ total_proveedores if total_proveedores is not none else '-' }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">Usuarios</h6>
                <p class="text-3xl font-bold">{{ total_usuarios if total_usuarios is not none else '-' }}</p>
            </div>
        </div>
        <div class="w-full md:w-1/2 lg:w-1/4 p-2">
            <div class="bg-white rounded-lg shadow-md text-center p-4">
                <h6 class="text-sm font-semibold text-gray-500 mb-2">TTL caché reportes</h6>
                <p class="text-3xl font-bold">{{ cache_ttl if cache_ttl is not none else '-' }}s</p>
                <p class="text-xs text-gray-500">Hits: {{ cache_hits }} | Misses: {{ cache_misses }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
